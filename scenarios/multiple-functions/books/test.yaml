- vars:
    functions: file://scenarios/multiple-functions/books/functions.md
    message: file://scenarios/multiple-functions/books/questions/00-find-a-book.md
    expected:
      calls:
        - function: library.search_book
          parameters:
            book_name: The Hitchhiker's Guide to the Galaxy
            city: New York
  assert:
    - type: javascript
      description: Generates only one function call
      value: file://scripts/utilities.js:findFunctionCalls
    - type: javascript
      description: Does not hallucinate function outputs
      value: file://scripts/utilities.js:findFunctionOutputs
    - type: javascript
      description: Does not hallucinate function specs
      value: file://scripts/utilities.js:findFunctionSpecifications
    - type: javascript
      description: Produces the correct function calls
      value: file://scripts/utilities.js:matchFunctionCalls
  metadata:
    conversationId: multiple-functions/books
- vars:
    functions: file://scenarios/multiple-functions/books/functions.md
    message: file://scenarios/multiple-functions/books/outputs/00-book-search.md
    raw: true
  assert:
    - type: javascript
      description: Does not generate another function call
      value: file://scripts/utilities.js:findFunctionCalls
    - type: javascript
      description: Does not hallucinate function outputs
      value: file://scripts/utilities.js:findFunctionOutputs
    - type: javascript
      description: Does not hallucinate function specs
      value: file://scripts/utilities.js:findFunctionSpecifications
    - type: llm-rubric
      description: Conveys output in a user-friendly manner
      value: The response must answer the user's question about the books in a helpful and user-friendly manner, by using the function output received.
  metadata:
    conversationId: multiple-functions/books
